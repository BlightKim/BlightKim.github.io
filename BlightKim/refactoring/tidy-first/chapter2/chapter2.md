---
title: tidy-first(2)
layout: default
parent: 리팩토링
---

# 안쓰는 코드

- 안쓰는 코드는 바로 지워버려라
- 필요할 때 복구 기능은 `git` 등 형상관리 도구가 지원한다
- 정리하는 과정에서는 코드를 `조금만` 삭제하라

---
# 대칭으로 맞추기
- 코드는 성장하고 변한다
- 성장 과정중에는 일관성이 필요하다

---
# 새로운 인터페이스로 기존 루틴을 호출
- 기존 인터페이스를 호출하기 어렵거나 복잡하다면 새로운 인터페이스를 생성하라
- 새로 만든 인터페이스로 기존 인터페이스를 호출하라

---
# 응집도를 높이는 배치 
* 가장 좋은 코드 정리법
> 결합도 제거 비용 + 변경 비용 < 결합도에 따른 비용 + 변경 비용
> 
> 먼저 응집도를 높이고 동작을 변경하면 더 쉽게 변경할 수 있다

---
# 설명하는 변수

- 좋지 않은 예시
```
return new Point(...긴 표현식..., ... 다른 표현식 ...);
```

- 좋은 예시
```
x = ...긴 표현식...;
y = ...다른 표현식...;
return new Point(x, y);
```

> 코드 정리 커밋과 동작 변경 커밋은 분리해야 함
---
# 설명하는 상수
### 상징적인 상수를 만들어라

- 좋지 않은 예시

```
if response.code = 404
    ...코드...
```

- 좋은 예시

```java
PAGE_NOT_FOUND := 404
if response.code = PAGE_NOT_FOUND
...코드...
```

{: .important }
> 그러나 빈약한 의미를 가진 상수는 도움이 되지 않는다


---

# 명시적인 매개변수

- 명시적이지 않은 매개변수 전달 예시

```
params = {a: 1, b: 2}
foo(params)

function foo(params)
           ...params.a... ...params.b...
```

- 명시적인 매개변수 전달

```
function foo(params)
foo_body(params.a, params.b)

function_foo(a, b)
  ...a... ...b...
```

---
# 비슷한 코드끼리 분류
### 비슷한 코드가 구분이 될 때, 빈 줄 넣어 구분하라

---
# 도우미 추출
### 다른 코드와 상호작용이 적고 목적이 분명한 코드는 `헬퍼메소드`로 추출하라
### 헬퍼 메소드의 이름은 작동 방식이 아니라 목적에 따라 짓는다

* 예시코드 1 변경 전
```
routine()
    ...그대로 두는 코드...
    ...바꾸려는 코드...
    ...그대로 두는 코드...
```
* 예시코드 1 변경 후 
```
helper()
    ...바꾸려는 코드...
routine()
    ...그대로 두는 코드...
    helper()
    ...그대로 두는 코드...
```

* 예시코드 2 (a 함수가 b 함수보다 앞서 호출되야 하는 경우) 변경 전
```
foo.a()
foo.b()
```

* 예시코드 2 (a 함수가 b 함수보다 앞서 호출되야 하는 경우) 변경 후
```
ab()
    a()
    b()
```
---
# 하나의 더미
### 필요한 만큼의 코드를 하나의 더미로 느껴질 때까지 모으고 정리하라
### 모아야 하는 코드
1. 길고 반복되는 인자 목록
2. 반복되는 코드와 조건문
3. 부적절한 이름을 가진 도우미 메서드
4. 변경에 노출 된 데이터 구조

---
# 설명하는 주석
> 코드를 읽다가 `이렇게 돌아가는 구나 !` 라는 생각이 들면 기록하라

> 15분 전의 자신을 떠올리고 주석을 추가하라

---
# 불필요한 주석 지우기
> 코드로 내용을 모두 이해할 수 있다면, 주석은 삭제하라
> ```ruby
> getX()
>   # return X
>   return X
> ```

> 코드 정리는 서로 연결 되어 있다
> 
> ```ruby
> if (generator)
>   ...generator 설정을 위한 코드...
> else
>   # generator가 없다면 default 반환
>   return getDefaultGenerator()
> ```
> 보호구문 적용
> ```ruby
> if (!generator)
>   # generator가 없다면 default 반환
>   return getDefaultGenerator()
> 
> ...generator 설정을 위한 코드...
> ```
---
# 연쇄적인 정리


